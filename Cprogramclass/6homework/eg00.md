# 第7章 结构and链表

## 7.1 结构类型(struct) and 结构变量

### 0. 引入

解决实际应用问题时,常常需要这样一种数据对象进行处理  
它们由 多项成员 组成,并且 各成员的数据类型 常不同  

C语言引入了 **结构类型** 来对这类数据进行描述  
然后通过 **结构变量** (也称**共用体**) 来表示这样的数据  

### 1. 结构类型

#### 结构类型的定义方式

定义一个 结构类型 的一般形式:  

```c
struct 标识符
{
    成员说明表
};
```

其中,关键字`struct`引出结构类型的定义,与 标识符 **一起**组成 结构类型的标记  

花括号内部用于结构类型的 全体成员 的说明,指明该结构类型的各个成员的 数据类型 and 名称  
每个成员变量的说明形式为:  

```c
类型 标识符;
```

#### 关于结构类型的补充

1. 一个结构体可以有多个成员  
2. 同一个结构体中的成员不可重名  
3. 一个结构体的成员的类型可以为: 基本数据类型 and 数组 and 其他已经定义的结构类型
4. 不要忘记结构体定义最后要加上`;`  
5. C语言中`struct 标识符`才相当于结构类型的名称,单独的`标识符`不可以表示结构类型,除非采用`typedef`的方法  
    *(在我的编译环境下测试属实,会显示"未定义的标识符"报错)*  
    C++中在,在不会引起混淆(例如结构类型与结构变量同名)的情况下,引用结构类型可以不用`struct`来引导,建议采用C++的方法  

#### 结构类型的一个实例  

```cpp
struct Date
{
    int day ;
    int month ;
    int year ;
};

struct student
{
    int number ;
    char name[ 20 ] ;
    char sex ;
    Date birthday ;
    char address[ 40 ] ;
};
```

上述代码段先定义了一个结构类型`Date`,再定义了一个结构类型  
名为`struct student`,成员有`number` and `name` and `sex` and `birthday` and `address` 共5个  
其中注意`birthday`的数据类型为结构类型`Date`,因而`student`是一个简单的嵌套的结构类型  
这种嵌套结构再之后表示实际应用中为表达复杂的数据结构,会很常用  

### 2. 结构变量

#### 结构变量的概念

结构类型定义中,详细给出类型的每个成员的 名称 and 类型  
但 结构类型定义 只是表明这样一个数据类型的"模式",并非一个实际的特定的 数据实体 ,因而其**本身不要求分配存储单元**  

程序若要使用结构类型所描述的数据信息,必须先定义 **结构变量**  
而 结构变量 作为一个实际的数据实体,是需要占据内存的来存储结构类型所描述的具体数据的  

#### 对于结构变量的一些理解

结构类型 之于 结构变量 就相当于描述文本,而 结构变量 才能实际存储数据  
可以理解为语言给出的 基础数据类型(例如`int`) 之于 变量 的关系  
实际上在C++语法下,定义结构变量的方式也是很类似的  
*只不过结构类型要由基础数据类型构成,不是那么的"基础"*  

#### 结构变量的定义方式

定义结构变量的主要的两种的方式:  

1. 先定义结构类型,再声明结构变量  
    一般形式:  

    ```cpp
    struct 结构类型名 标识符表;     /* C语法 */
    结构类型名 标志符表;            /* C++语法 */
    ```

    标识符表中每个标识符是对应结构变量的名称  
    每个结构变量的成员的 名称 and 个数 and 数据类型 均与结构类型定义中的一致  

    补充:  
    结构变量的内存占用等于结构定义中的各个成员所占的内存之和  
2. 在定义结构类型的同时定义结构变量  
    一般形式:  

    ```cpp
    struct 标识符
    {
        成员说明表 ;
    } 标识符表 ;
    ```

    其中:  
    struct后的标识符 是**结构类型**的名称  
    标识符表中的标识符 是**结构变量**的名称  

    注:  
    此时`struct`后的`标识符`是允许略去的 *(但相当于之后没法通过这个结构类型的名称来定义了,因此良好的编程习惯建议我们不要这么做!)*  

#### 结构变量的初始化

定义结构变量时还可以给它初始化,也就是给它赋上初值  
此时,要按照结构类型定义中 **成员的顺序** 逐一给出各成员的初值  
以下通过一个实例进行说明:  

```cpp
struct Point
{
    int x ;
    int y ;
} p1 = { 20 , 50 } , p2 ;
Point p3 = { 10 , 40 } , p4 ;
```

#### 关于以上内容的注意点

1. 分辨 结构类型名 and 结构变量名  
    *相当于分辨 `int` and `int`类型的变量*  
2. 结构变量初始化的时间  
    存储类别 and 存储期 and 作用域 的相关在结构变量上同样适用  
    *这告诫我们不要因为是结构变量就忘了初始化的重要性*  
3. 可以为结构类型创建对应类型的指针  
    *和基础数据类型是基本一致的*  
    称其为指向结构的指针变量,简称 结构指针  
    定义形式与一般的指针也很像,例如以下实例:  

    ```cpp
    Date *pd , date3 ;  /*采用了C++的句法*/
    pd = &date3 ;
    ```

    不难理解,一个结构变量应该是占一整块连续的内存空间,而取地址符号取得就是这一块内存的首地址  

### 3. 结构变量的引用
